<div *ngIf="exam">

  <div class="exam-info">
    <h2>{{ exam.title }}</h2>
    <p><strong>AÃ§Ä±klama:</strong> {{ exam.description }}</p>
    <p><strong>BaÅŸlangÄ±Ã§:</strong> {{ formatDate(exam.startDate) }}</p>
    <p><strong>BitiÅŸ:</strong> {{ formatDate(exam.endDate) }}</p>
    <p><strong>SÃ¼re:</strong> {{ exam.duration }} dakika</p>
    <p><strong>Soru SayÄ±sÄ±:</strong> {{ exam.questions.length || 0 }}</p>
  </div>

  <div class="exam-actions">
    <button (click)="goBack()" class="back-button">â† SÄ±navlara Geri DÃ¶n</button>
    <button (click)="goToCreateQuestion()" class="add-question-button">+ Soru Ekle</button>
  </div>

  <div class="questions" *ngIf="exam.questions.length > 0">
    <h3>Sorular</h3>
    <div *ngFor="let question of paginatedQuestions; let i = index" class="question-card">
      <!-- ğŸ”§ Yeni: Soru aksiyon butonlarÄ± -->
      <div class="question-actions">
        <button class="edit-button" (click)="editQuestion(question.questionId)">DÃ¼zenle</button>
        <button class="delete-button" (click)="deleteQuestion(question)">Sil</button>
      </div>
      <h4>Soru {{ (currentPage - 1) * pageSize + i + 1 }}:</h4>
      <p [innerHTML]="sanitizeHtml(question.questionText)"></p>

      <ul class="options">
        <li [class.correct]="question.correctAnswer === question.optionA">
          A) <span [innerHTML]="sanitizeHtml(question.optionA)"></span>
        </li>
        <li [class.correct]="question.correctAnswer === question.optionB">
          B) <span [innerHTML]="sanitizeHtml(question.optionB)"></span>
        </li>
        <li [class.correct]="question.correctAnswer === question.optionC">
          C) <span [innerHTML]="sanitizeHtml(question.optionC)"></span>
        </li>
        <li [class.correct]="question.correctAnswer === question.optionD">
          D) <span [innerHTML]="sanitizeHtml(question.optionD)"></span>
        </li>
      </ul>

    </div>

    <div class="pagination" *ngIf="exam.questions.length > 0">
      <button (click)="prevPage()" [disabled]="currentPage === 1">Ã–nceki</button>
      <span>{{ currentPage }} / {{ totalPages }}</span>
      <button (click)="nextPage()" [disabled]="currentPage === totalPages">Sonraki</button>
    </div>
  </div>
</div>

<div *ngIf="!exam">
  <p>SÄ±nav detaylarÄ± yÃ¼kleniyor...</p>
</div>