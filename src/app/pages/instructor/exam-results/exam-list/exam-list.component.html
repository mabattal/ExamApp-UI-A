<!-- Hiç sınav yoksa uyarı kartı -->
<div *ngIf="exams.length === 0 && isLoading" class="empty-state">
  <i class="fas fa-clipboard-list"></i>
  <p>Henüz sınav sonucu bulunmuyor</p>
</div>

<div class="exam-list-wrapper" *ngIf="!isLoading;">
  <div *ngFor="let exam of exams" class="exam-card">
    <div class="card-header">
      <h2>{{ exam.title }}</h2>
      <p class="exam-dates">{{ exam.startDate | date: 'short' }} - {{ exam.endDate | date: 'short' }}</p>
    </div>

    <p class="description">{{ exam.description }}</p>

    <div class="card-info">
      <p><strong>Soru Sayısı:</strong> {{ exam.questions.length }}</p>
      <p><strong>Süre:</strong> {{ exam.duration }} dk</p>

      <ng-container *ngIf="getStats(exam.examId); else noStats">
        <p><strong>Katılımcı:</strong> {{ getStats(exam.examId)?.studentCount }}</p>
        <p><strong>Ortalama:</strong> {{ getStats(exam.examId)?.averageScore }}</p>
        <p><strong>Maksimum:</strong> {{ getStats(exam.examId)?.maxScore }}</p>
        <p><strong>Minimum:</strong> {{ getStats(exam.examId)?.minScore }}</p>
      </ng-container>

      <ng-template #noStats>
        <p class="no-stats">İstatistik yok</p>
      </ng-template>
    </div>

    <button class="results-button" [disabled]="!getStats(exam.examId)" (click)="viewExamDetail(exam.examId)">
      Sonuçları Görüntüle
    </button>
  </div>
</div>
